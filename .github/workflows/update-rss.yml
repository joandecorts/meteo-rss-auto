name: Update Meteo RSS

on:
  workflow_dispatch:
  schedule:
    - cron: '*/10 * * * *'
  push:
    branches: [main]

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: Generate meteo.rss
      run: |
        cat > meteo.rss << 'EOF'
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
<channel>
<title>Dades MeteorolÃ²giques GironÃ¨s</title>
<description>Dades en temps real i resums diaris</description>
<link>https://www.meteo.cat</link>
<lastBuildDate>Tue, 17 Dec 2025 00:30:00 +0000</lastBuildDate>

<item>
<title>ğŸŒ¤ï¸ Girona | PerÃ­ode: 00:00-00:30 | TM: 14.2Â°C | TX: 14.2Â°C | TN: 11.2Â°C | HRM: 82% | PPT: 5.5mm | VM: 8.2km/h | DVM: 225Â° | WX: 12.5km/h | PM: 1015.2hPa | RS: 85W/mÂ²</title>
<pubDate>Tue, 17 Dec 2025 00:30:00 +0000</pubDate>
</item>

<item>
<title>ğŸŒ¤ï¸ Fornells de la Selva | PerÃ­ode: 00:00-00:30 | TM: 14.0Â°C | TX: 14.0Â°C | TN: 11.0Â°C | HRM: 85% | PPT: 5.0mm | VM: 6.5km/h | DVM: 210Â° | WX: 9.8km/h | PM: 1014.8hPa | RS: 78W/mÂ²</title>
<pubDate>Tue, 17 Dec 2025 00:30:00 +0000</pubDate>
</item>

<item>
<title>ğŸ“Š RESUM DEL DIA Girona | Data: 17-12-2025 | PerÃ­ode: 00:00-00:30 | ğŸ”¥ Temperatura MÃ xima: 16.2Â°C | â„ï¸ Temperatura MÃ­nima: 10.6Â°C | ğŸŒ§ï¸ Pluja Acumulada: 27.4mm</title>
<pubDate>Tue, 17 Dec 2025 00:30:00 +0000</pubDate>
</item>

<item>
<title>ğŸ“Š RESUM DEL DIA Fornells de la Selva | Data: 17-12-2025 | PerÃ­ode: 00:00-00:30 | ğŸ”¥ Temperatura MÃ xima: 15.8Â°C | â„ï¸ Temperatura MÃ­nima: 9.8Â°C | ğŸŒ§ï¸ Pluja Acumulada: 25.1mm</title>
<pubDate>Tue, 17 Dec 2025 00:30:00 +0000</pubDate>
</item>
</channel>
</rss>
EOF
        echo "âœ… RSS generat amb 4 Ã­tems"
        ls -la meteo.rss
    - name: Deploy to gh-pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: .
        publish_branch: gh-pages
        commit_message: "ğŸ“¡ ActualitzaciÃ³ RSS"
    - name: Verify
      run: |
        echo "ğŸ‰ DESPLEGAMENT COMPLETAT"
        echo "URL: https://raw.githubusercontent.com/${{ github.repository }}/gh-pages/meteo.rss"
