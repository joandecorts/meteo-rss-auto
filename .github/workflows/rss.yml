name: Update Meteo RSS
on:
  workflow_dispatch:
  schedule:
    - cron: '*/10 * * * *'
permissions:
  contents: write
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Generate RSS
        run: |
          # Iniciar RSS
          echo '<?xml version="1.0" encoding="UTF-8"?>' > meteo.rss
          echo '<rss version="2.0">' >> meteo.rss
          echo '<channel>' >> meteo.rss
          echo '<title>Dades Meteorol√≤giques Giron√®s</title>' >> meteo.rss
          echo '<description>Dades en temps real i resums diaris</description>' >> meteo.rss
          echo '<link>https://www.meteo.cat</link>' >> meteo.rss
          echo '<lastBuildDate>Tue, 17 Dec 2025 02:00:00 +0000</lastBuildDate>' >> meteo.rss
          
          # √çtem 1
          echo '<item>' >> meteo.rss
          echo '<title>üå§Ô∏è Girona | Per√≠ode: 01:30-02:00</title>' >> meteo.rss
          echo '<pubDate>Tue, 17 Dec 2025 02:00:00 +0000</pubDate>' >> meteo.rss
          echo '</item>' >> meteo.rss
          
          # √çtem 2
          echo '<item>' >> meteo.rss
          echo '<title>üå§Ô∏è Fornells de la Selva | Per√≠ode: 01:30-02:00</title>' >> meteo.rss
          echo '<pubDate>Tue, 17 Dec 2025 02:00:00 +0000</pubDate>' >> meteo.rss
          echo '</item>' >> meteo.rss
          
          # √çtem 3
          echo '<item>' >> meteo.rss
          echo '<title>üìä RESUM DEL DIA Girona | Data: 17-12-2025</title>' >> meteo.rss
          echo '<pubDate>Tue, 17 Dec 2025 02:00:00 +0000</pubDate>' >> meteo.rss
          echo '</item>' >> meteo.rss
          
          # √çtem 4
          echo '<item>' >> meteo.rss
          echo '<title>üìä RESUM DEL DIA Fornells de la Selva | Data: 17-12-2025</title>' >> meteo.rss
          echo '<pubDate>Tue, 17 Dec 2025 02:00:00 +0000</pubDate>' >> meteo.rss
          echo '</item>' >> meteo.rss
          
          echo '</channel>' >> meteo.rss
          echo '</rss>' >> meteo.rss
          
          echo "‚úÖ RSS generat"
          head -20 meteo.rss
      
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: .
          publish_branch: gh-pages
