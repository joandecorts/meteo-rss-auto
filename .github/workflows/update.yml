# Versió completament corregida
$yaml = @'
name: Update Meteo
on: 
  workflow_dispatch:
  schedule:
    - cron: "0 */2 * * *"
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: "3.10"
      - run: pip install requests beautifulsoup4
      - run: python daily_weather_scraper.py
      - run: python generate_meteo_rss.py
'@

# Guarda
[System.IO.File]::WriteAllText(
    "$PWD\.github\workflows\update.yml",
    $yaml,
    [System.Text.UTF8Encoding]::new($false)
)

# Mostra línies 5-10
Write-Host "Línies 5-10:"
(Get-Content ".github\workflows\update.yml")[4..9] | ForEach-Object { "  $_" }

# Puja
git add ".github\workflows\update.yml"
git commit -m "FIX: Correct YAML structure"
git push origin main
